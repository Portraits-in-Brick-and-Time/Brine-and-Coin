{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://velopack.io/cli/vpk.schema.json",
  "title": "Velopack vpk CLI",
  "description": "JSON Schema for Velopack vpk CLI commands. Nuke kann das nutzen, um ToolWrapper-Code automatisch zu generieren (via `ToolSettings` mit `JsonSchema`). [web:27][web:11][web:35]",
  "type": "object",
  "properties": {
    "command": {
      "type": "string",
      "enum": ["pack", "download", "upload", "delta"],
      "description": "Hauptbefehl: pack (erstellen), download (alten Release laden), upload (hochladen), delta (Deltas generieren)."
    },
    "flavour": {
      "type": "string",
      "enum": [null, "[linux]"],
      "description": "Flavour-Präfix für Linux (z.B. `vpk [linux] pack`). Windows standardmäßig null."
    },
    "subcommand": {
      "type": "string",
      "oneOf": [
        { "const": "generate", "description": "vpk delta generate" },
        { "const": "patch", "description": "vpk delta patch" }
      ]
    },
    "options": {
      "type": "object",
      "properties": {
        "u": {
          "type": "string",
          "description": "--u, --packId <ID> (REQ für pack): Unique Identifier (ENV=VPK_PACK_ID)"
        },
        "v": {
          "type": "string",
          "description": "--v <VERSION>: Versionsnummer"
        },
        "p": {
          "type": "string",
          "description": "--p <PATH>: Publish-Verzeichnis oder Base-Pfad"
        },
        "mainExe": {
          "type": "string",
          "description": "--mainExe <NAME>: Haupt-EXE (ohne Pfad)"
        },
        "packTitle": {
          "type": "string",
          "description": "--packTitle <TITLE>: App-Titel"
        },
        "channel": {
          "type": "string",
          "description": "--channel <NAME> (REQ für upload): win/linux (ENV=VPK_CHANNEL)"
        },
        "repoUrl": {
          "type": "string",
          "description": "--repoUrl <URL>: GitHub Repo (für github)"
        },
        "token": {
          "type": "string",
          "description": "--token <TOKEN>: GitHub Token"
        },
        "releaseName": {
          "type": "string",
          "description": "--releaseName <NAME>: Release-Name"
        },
        "tag": {
          "type": "string",
          "description": "--tag <TAG>: GitHub Tag (z.B. v1.0.0)"
        },
        "publish": {
          "type": "boolean",
          "description": "--publish: Sofort publizieren"
        },
        "merge": {
          "type": "boolean",
          "description": "--merge: Merge-Channels bei Upload"
        },
        "new": {
          "type": "string",
          "description": "--new <PATH> (REQ für delta generate): Neues Package"
        },
        "output": {
          "type": "string",
          "description": "--output <PATH> (REQ für delta): Output-Pfad"
        },
        "base": {
          "type": "string",
          "description": "--base <PATH> (REQ für delta patch): Base-Package"
        },
        "patch": {
          "type": "string",
          "description": "--patch <PATH>: Patch-Package"
        },
        "verbose": {
          "type": "boolean",
          "description": "--verbose: Diagnostic-Messages"
        },
        "yes": {
          "type": "boolean",
          "description": "--yes: Non-interactive Ja"
        },
        "skip-updates": {
          "type": "boolean",
          "description": "--skip-updates: Skip Update-Checks"
        }
      },
      "additionalProperties": false,
      "required": ["u"]
    }
  },
  "required": ["command"],
  "additionalProperties": false,
  "examples": [
    {
      "command": "download",
      "options": {
        "repoUrl": "https://github.com/user/repo",
        "token": "${GITHUB_TOKEN}"
      }
    },
    {
      "flavour": "[linux]",
      "command": "pack",
      "options": {
        "u": "Brine_and_Coin",
        "v": "1.0.0",
        "p": "publish-linux",
        "mainExe": "Portraits_in_Brick_and_Time_-_Brine_And_Coin",
        "packTitle": "Brine and Coin"
      }
    },
    {
      "command": "upload",
      "options": {
        "channel": "win",
        "repoUrl": "https://github.com/user/repo",
        "releaseName": "1.0.0",
        "tag": "v1.0.0",
        "publish": true,
        "token": "${GITHUB_TOKEN}"
      }
    }
  ]
}
